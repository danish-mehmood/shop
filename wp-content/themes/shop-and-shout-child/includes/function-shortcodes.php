<?php
// ----------------------------------- //
// ------ Landing Page Shortcodes ---- //
// ----------------------------------- //

/**
 * Brand Partnerships
 */
add_shortcode( 'brand-logos', 'brand_logos_shortcode' );
function brand_logos_shortcode() {
ob_start();
?>
<div class="brand-logos-wrapper">
    <div class="brand-logo">
        <a target="_blank" href="https://crayolaciybox.com/?utm_expid=.dfj0wvJOQaiuFgGibajaOg.0&utm_referrer=https%3A%2F%2Fwww.crayola.com%2Ffaq%2Fanother-topic%2Fdoes-crayola-offer-a-subscription-box%2F">
            <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/logos/crayola-ciy.png' ?>">
        </a>
    </div>
    <div class="brand-logo">
        <a style="padding: 5px;" target="_blank" href="https://www.goldhunt.com/">
            <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/logos/goldhunt.png' ?>">
        </a>
    </div>
    <div class="brand-logo">
        <a target="_blank" href="https://www.districtventures.ca/">
            <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/logos/district-ventures.png' ?>">
        </a>
    </div>
    <div class="brand-logo">
        <a style="padding: 40px;" target="_blank" href="https://www.lockerboard.net/">
            <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/logos/lockerboard.png' ?>">
        </a>
    </div>
    <div class="brand-logo">
        <a style="padding: 50px;" target="_blank" href="https://coco5.com/">
            <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/logos/coco-5.png' ?>">
        </a>
    </div>
    <div class="brand-logo">
        <a style="padding: 10px;" target="_blank" href="https://www.geometry.com/ca ">
            <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/logos/geometry.png' ?>">
        </a>
    </div>
    <div class="brand-logo">
        <a style="padding: 15px;" target="_blank" href="https://www.softsoap.com/en-us">
            <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/logos/softsoap.png' ?>">
        </a>
    </div>
    <div class="brand-logo">
        <a style="padding: 30px;" target="_blank" href="https://www.nakedsnacks.ca/">
            <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/logos/naked-snacks.png' ?>">
        </a>
    </div>
    <div class="brand-logo">
        <a style="padding: 35px;" target="_blank" href="https://www.angusreidforum.com/en-ca/Sign-In?returnurl=%2fen-ca%2f">
            <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/logos/angus-reid-forum.png' ?>">
        </a>
    </div>
    <div class="brand-logo">
        <a style="padding: 25px;" target="_blank" href="https://www.rivaltech.com/">
            <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/logos/rival.png' ?>">
        </a>
    </div>
    <div class="brand-logo">
        <a target="_blank" href="https://inkbox.com/">
            <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/logos/inkbox.png' ?>">
        </a>
    </div>
    <div class="brand-logo">
        <a style="padding: 20px;" target="_blank" href="https://www.sincerelysilver.co/">
            <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/logos/sincerely-silver.png' ?>">
        </a>
    </div>
    <div class="brand-logo">
        <a style="padding: 35px;" target="_blank" href="https://try.beekeepersnaturals.com/beeganp_fb1/?gclid=Cj0KCQjwgezoBRDNARIsAGzEfe5Ku2lJ9zN-ynbwtJIRBVMgy9fcSGU5K0225fMtex6xQEHKkay6IPYaAp1TEALw_wcB">
            <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/logos/beekeepers-natural.png' ?>">
        </a>
    </div>
    <div class="brand-logo">
        <a style="padding: 50px;" target="_blank" href="http://www.freeyumm.com/">
            <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/logos/freeyumm.png' ?>">
        </a>
    </div>
    <div class="brand-logo">
        <a style="padding: 20px;" target="_blank" href="https://www.evalinabeauty.com/">
            <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/logos/evalina-beauty.png' ?>">
        </a>
    </div>
    <div class="brand-logo">
        <a target="_blank" href="https://elevatorstrategy.com/">
            <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/logos/elevator.png' ?>">
        </a>
    </div>
    <div class="brand-logo">
        <a style="padding: 30px;" target="_blank" href="https://www.gardenoflife.com/content/">
            <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/logos/garden-of-life.png' ?>">
        </a>
    </div>
    <div class="brand-logo">
        <a style="padding: 25px;" target="_blank" href="https://www.coastprotein.com/ ">
            <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/logos/coast.png' ?>">
        </a>
    </div>
    <div class="brand-logo">
        <a style="padding: 25px;" target="_blank" href="https://thinkproducts.com/en-us/">
            <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/logos/think-products.png' ?>">
        </a>
    </div>
    <div class="brand-logo">
        <a style="padding: 25px;" target="_blank" href="https://vasanticosmetics.ca/">
            <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/logos/vasanti.png' ?>">
        </a>
    </div>
    <div class="brand-logo">
        <a style="padding: 25px;" target="_blank" href="https://global.beanbodycare.com/">
            <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/logos/beanbody.png' ?>">
        </a>
    </div>
    <div class="brand-logo">
        <a style="padding: 45px;" target="_blank" href="https://www.nfanutrition.com/">
            <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/logos/nfanutrition.png' ?>">
        </a>
    </div>
    <div class="brand-logo">
        <a target="_blank" href="https://avenaoriginals.com/">
            <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/logos/avena-originals.png' ?>">
        </a>
    </div>
    <div class="brand-logo">
        <a style="padding: 25px;" target="_blank" href="https://www.simplybeautifulbox.com/ ">
            <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/logos/simply-beautiful.png' ?>">
        </a>
    </div>
</div>
<?php
return ob_get_clean();
}

/**
 * Social listening graphic
 */
add_shortcode( 'social-listening-graphic', 'social_listening_graphic_shortcode' );
function social_listening_graphic_shortcode() {
ob_start();
?>
<div class="social-listening-graphic">
	<img class="macbook-pro" src="<?php echo get_stylesheet_directory_uri() . '/images/graphics/social-listening/macbook-pro.png'; ?>">
	<img class="negative-arrow" src="<?php echo get_stylesheet_directory_uri() . '/images/graphics/social-listening/negative-arrow.png'; ?>">
	<img class="negative-comment" src="<?php echo get_stylesheet_directory_uri() . '/images/graphics/social-listening/negative-comment.png'; ?>">
	<img class="positive-arrow" src="<?php echo get_stylesheet_directory_uri() . '/images/graphics/social-listening/positive-arrow.png'; ?>">
	<img class="positive-comment" src="<?php echo get_stylesheet_directory_uri() . '/images/graphics/social-listening/positive-comment.png'; ?>">
	<img class="neutral-arrow" src="<?php echo get_stylesheet_directory_uri() . '/images/graphics/social-listening/neutral-arrow.png'; ?>">
	<img class="neutral-comment" src="<?php echo get_stylesheet_directory_uri() . '/images/graphics/social-listening/neutral-comment.png'; ?>">
</div>
<?php
return ob_get_clean();
}

/**
 * Instagram boost graphic
 */
add_shortcode( 'instagram-boost-graphic', 'instagram_boost_graphic_shortcode' );
function instagram_boost_graphic_shortcode() {
ob_start();
?>
<div class="instagram-boost-graphic">
	<img class="phone-base" src="<?php echo get_stylesheet_directory_uri() . '/images/graphics/instagram-boost/base.png'; ?>">
	<img class="phone-bottom-layer" src="<?php echo get_stylesheet_directory_uri() . '/images/graphics/instagram-boost/bottom-layer.png'; ?>">
	<img class="phone-top-layer" src="<?php echo get_stylesheet_directory_uri() . '/images/graphics/instagram-boost/top-layer.png'; ?>">
</div>
<?php
return ob_get_clean();
}

/**
 * Product Display Image Slider
 */
add_shortcode( 'product-display-slider', 'product_display_slider_shortcode' );
function product_display_slider_shortcode() {

global $product;

ob_start();

if($product) {

    $image_urls = array();
    $thumbnail_urls = array();

    $primary_image_id = get_post_thumbnail_id($product->get_id());
    if(isset(wp_get_attachment_image_src($primary_image_id, 'woocommerce_single')[0])) {
        $image_urls[] = wp_get_attachment_image_src($primary_image_id, 'woocommerce_single')[0];
    }
    if(isset(wp_get_attachment_image_src($primary_image_id, 'woocommerce_gallery_thumbnail')[0])) {
        $thumbnail_urls[] = wp_get_attachment_image_src($primary_image_id, 'woocommerce_gallery_thumbnail')[0];
    }

    $gallery_ids = $product->get_gallery_attachment_ids('thumbnail');
    foreach($gallery_ids as $gallery_id) {
        if(isset(wp_get_attachment_image_src($gallery_id,'woocommerce_single')[0])) {
            $image_urls[] = wp_get_attachment_image_src($gallery_id,'woocommerce_single')[0];
        }
        if(isset(wp_get_attachment_image_src($gallery_id, 'woocommerce_gallery_thumbnail')[0])) {
            $thumbnail_urls[] = wp_get_attachment_image_src($gallery_id, 'woocommerce_gallery_thumbnail')[0];
        }
    }
    
    ?>
    <div class="product-image-slider">
        <div class="slider">
            <?php foreach($image_urls as $url): ?>
                <div class="image">
                    <img src="<?php echo esc_url($url) ?>">
                </div>
            <?php endforeach; ?>
        </div>
        <div class="slider-nav">
            <?php foreach($thumbnail_urls as $url): ?>
                <div class="preview">
                    <img src="<?php echo esc_url($url) ?>">
                </div>
            <?php endforeach; ?>
        </div>
    </div>
    <?php
}
return ob_get_clean();
}

/* Shortcode for featured product slider*/
add_shortcode( 'featured-products', 'featured_products_shortcode' );
function featured_products_shortcode() {
	ob_start();
	$args = array(
			'post_type' => 'product',
			'posts_per_page' => 7,
			'order' => 'ASC',
			'tax_query' => array(
		array(
			'taxonomy' => 'product_visibility',
			'field'    => 'name',
			'terms'    => 'featured',
			),
		),
	);

	$products = get_posts( $args );


    ?>

    <?php if( !empty($products) ) : ?>

        <div class="featured-product-slider">

        <?php foreach($products as $product) : ?>

        <?php
            $pid = $product->ID;
            $image_url = get_the_post_thumbnail_url($pid);
            $brand_data = get_campaign_brand($pid);
            $brand_name = $brand_data->brand_name;
            $title = $product->post_title;
            $product_url = $product->guid;
        ?>

            <div class="featured-product">
                <div class="featured-product-inner">
                    <div class="image-container" style="background-image: url('<?php echo esc_url($image_url); ?>');"></div>
                    <span class="brand"><?php echo esc_html($brand_name); ?></span>
                    <span class="title"><?php echo esc_html($title); ?></span>
                    <a href="<?php echo esc_url($product_url); ?>" class="marketplace-button"><img src="<?php echo get_stylesheet_directory_uri() . '/images/icons/shop/shopping-cart-grey.svg'; ?>"><span>Go to Marketplace</span></a>
                </div>
            </div>

        <?php endforeach; ?>

        </div>

    <?php endif; ?>

        <script type="text/javascript">
        jQuery(document).ready(function() {
            jQuery(".featured-product-slider").slick({
                slidesToShow: 3,
                slidesToScroll: 1,
                autoplay: true,
                autoplaySpeed: 5000,
                arrows: false,
                dots:false,
                centerMode: true,
                centerPadding: "0",
                responsive: [{
                    breakpoint:800,
                    settings: {
                        slidesToShow: 2,
                        slidesToScroll: 2,
                        dots: false
                    }
                },
                {
                    breakpoint: 540,
                    settings: {
                        slidesToShow: 1,
                        slidesToScroll: 1,
                        dots: false
                    }
                }]
            });
        });
    </script>
<?php  return ob_get_clean();
}

/* Shortcode for featured product slider*/
add_shortcode( 'sas-featured-ys-products', 'featured_ys_products_shorcode' );
function featured_ys_products_shorcode() {
	ob_start();

	$args = array(
		'post_type' => 'product',
		'posts_per_page' => 7,
		'order' => 'ASC',
		'meta_key' => 'young_stars_featured',
		'meta_value' => 1,
	);

	$products = get_posts( $args );


	?>

	<?php if( !empty($products) ) : ?>

		<div class="featured-product-slider">

		<?php foreach($products as $product) : ?>

		<?php
			$pid = $product->ID;
			$image_url = get_the_post_thumbnail_url($pid);
			$brand_data = get_campaign_brand($pid);
			$brand_name = $brand_data->brand_name;
			$title = $product->post_title;
			$product_url = $product->guid;
		?>

			<div class="featured-product">
				<div class="featured-product-inner">
					<div class="image-container" style="background-image: url('<?php echo esc_url($image_url); ?>');"></div>
					<span class="brand"><?php echo esc_html($brand_name); ?></span>
					<span class="title"><?php echo esc_html($title); ?></span>
					<a href="<?php echo esc_url($product_url); ?>" class="marketplace-button"><img src="<?php echo get_stylesheet_directory_uri() . '/images/icons/shop/shopping-cart-grey.svg'; ?>"><span>Go to Marketplace</span></a>
				</div>
			</div>

		<?php endforeach; ?>

		</div>

	<?php endif; ?>

		<script type="text/javascript">
		jQuery(document).ready(function() {
			jQuery(".featured-product-slider").slick({
				slidesToShow: 3,
				slidesToScroll: 1,
				autoplay: true,
				autoplaySpeed: 5000,
				arrows: true,
				dots:false,
				centerMode: true,
				centerPadding: "0",
				responsive: [{
					breakpoint:800,
					settings: {
						slidesToShow: 2,
						slidesToScroll: 2,
						dots: false
					}
				},
				{
					breakpoint: 540,
					settings: {
						slidesToShow: 1,
						slidesToScroll: 1,
						dots: false
					}
				}]
			});
		});
	</script>
<?php  return ob_get_clean();
}
// ------------------------------- //
// ---- Influencer Shortcodes ---- //
// ------------------------------- //
add_shortcode( 'shoutout-requirements', 'shoutout_requirements_shortcode' );
function shoutout_requirements_shortcode($params = false) {
if($params['campaign_id']) {

$campaign_id = $params['campaign_id'];

$inspiration_images = get_post_meta($campaign_id, 'shoutout_inspiration', true);
$shoutout_channels = get_post_meta( $campaign_id, 'shoutout_channels', true );
$campaign_strategy = get_post_meta($campaign_id, 'campaign_strategy', true);
$prize_description = get_post_meta($campaign_id, 'prize_description', true);
$visuals = get_post_meta( $campaign_id, 'visuals', true );
$photo_tags = get_post_meta( $campaign_id, 'photo_tags', true );
$photo_tags_array = array();
for($i=0;$i<$photo_tags;$i++) {
    $meta_key = 'photo_tags_' . $i . '_tag';
    $photo_tags_array[] = '@'.get_post_meta($campaign_id, $meta_key, true);
}
$caption = get_post_meta( $campaign_id, 'caption', true );
$hashtags = get_post_meta( $campaign_id, 'hashtags', true );
$hashtags_array = array();
for($i=0;$i<$hashtags;$i++) {
    $meta_key = 'hashtags_' . $i . '_tag';
    $hashtags_array[] = '#'.get_post_meta($campaign_id, $meta_key, true);
}
$timeline = get_post_meta( $campaign_id, 'timeline', true );

ob_start();
?>
<h2>ShoutOut Requirements</h2>

<?php if( $inspiration_images ) : ?>
    <h3>ShoutOut Inspiration</h3>
    <div class="inspiration-slider unslid">
        <?php for($i=0;$i<$inspiration_images;$i++) :
            $meta_key = 'shoutout_inspiration_' . $i . '_images';
            $attach_id = get_post_meta($campaign_id, $meta_key, true);
            $url = wp_get_attachment_url($attach_id);
        ?>
        <div class="slider-item">
            <div class="slider-image" style="background-image: url('<?php echo $url; ?>');"></div>
        </div>
        <?php endfor; ?>
    </div>

    <script type="text/javascript">
    jQuery(document).ready(function() {
        jQuery('.inspiration-slider.unslid').each(function(){
            jQuery(this).slick({
                slidesToShow: 1,
                slidesToScroll: 1,
                autoplay: true,
                autoplaySpeed: 5000,
                arrows: true,
                dots:false,
                centerMode: true,
                centerPadding: "0",
            });
            jQuery(this).removeClass('unslid');
        });
    });
    </script>
<?php endif; ?>

<table class="shop_attributes">
    <tr>
        <th>ShoutOut on the Following Channels</th>
        <td>
            <p>
            <?php foreach( $shoutout_channels as $channel ) : ?>
                <img heigth="30" width="30" src="<?php echo get_stylesheet_directory_uri() . '/images/icons/' . $channel . '-coral.svg'; ?>">
            <?php endforeach; ?>
            </p>
        </td>
    </tr>
    <?php if($prize_description && $campaign_strategy == 'giveaway') : ?>
      <tr>
        <th>Giveaway Guidelines / Prize Description</th>
        <td><p><?php echo nl2br($prize_description) ?></p></td>
      </tr>
    <?php endif; ?>
    <tr>
        <th>Visuals</th>
        <td><p><?php echo $visuals; ?></p></td>
    </tr>
    <tr>
        <th>Photo Tags</th>
        <td><p><?php echo is_numeric($photo_tags)?implode(', ', $photo_tags_array):$photo_tags; ?></p></td>
    </tr>
    <tr>
        <th>Caption</th>
        <td><p><?php echo nl2br($caption); ?></p></td>
    </tr>
    <tr>
        <th>Hashtags</th>
        <td><p><?php echo is_numeric($photo_tags)?implode(', ', $hashtags_array):$photo_tags; ?></p></td>
    </tr>
    <tr>
        <th>Timeline</th>
        <td><p><?php echo $timeline; ?></p></td>
    </tr>
</table>
<?php
echo ob_get_clean();
}
}

// Influencer Forms

/**
 * Shortcode for registration form
 */


/* Shortcode for interest boxes  */
add_shortcode( 'inf-interests-boxes', 'inf_interests_boxes_shortcode' );
function inf_interests_boxes_shortcode() {
ob_start();

$uid = get_current_user_id();
$user_interests = (array)get_user_meta( $uid, 'inf_interests', true );

$age = get_user_meta( $uid, 'inf_age', true );

$args = array (
    'taxonomy' => 'product_cat',
    'hide_empty' => 0
);
$categories = get_categories($args);

?>

<div id="inf-interests-container">
<?php

$i = 0;

foreach ( $categories as $key => $category ) {
    if ( $i != 0 ) {
        $thumbnail_id = 0;
        $thumbnail_id = get_term_meta( $category->term_id, 'thumbnail_id', true );
        if( $thumbnail_id != 0 ) {
            $image = wp_get_attachment_url( $thumbnail_id );
        }

        if( ($age == '' || $age < 18) && $category->slug == 'cannabis-culture' ) {
        	$age_disabled = true;
        } else {
        	$age_disabled = false;
        }

        ?>
        <div class="interest-box" style="background-image:url( <?php echo ( $image ) ? $image : ''; ?>);">
            <label>
                <input class="interest-box-cb <?php echo ( $age_disabled ? 'age-disabled' : '' ); ?>" type="checkbox" name="interests[]" value="<?php echo $category->slug ?>" <?php echo ( in_array( $category->slug, $user_interests ) ? 'checked' : '' ) ?> <?php echo ( ($age == '' || $age < 18) && $category->slug == 'cannabis-culture' ? 'disabled' : '' ); ?>>
                <span class="interest-box-overlay"><?php echo $category->name; ?></span>
            </label>
        </div>
        <?php
    }
    $i++;
}

?>

</div>

<?php
return ob_get_clean();
}

/* Shortcode for welcome page */
add_shortcode( 'welcome-to-sas', 'welcome_to_sas_shortcode' );
function welcome_to_sas_shortcode() {
ob_start();

include_once(get_stylesheet_directory().'/includes/api/instagram/instagram-connect-welcome.php');

if( !is_user_logged_in()) {
    wp_redirect(get_site_url() . '/my-account/edit-account');
}

$user_id = get_current_user_id();

?>
<script type="text/javascript">
    jQuery(document).ready(function($) {
        infSignupCheckCookies(<?php echo $user_id; ?>);
    });
</script>

<div class="welcome-to-sas-container">
    <input type="hidden" id="sas-welcome-page">
    <h1>Welcome to the ShopandShout Community!</h1>
    <p>Please connect your Instagram account.</p>
    <a style="max-width: 300px; margin: 0 auto;" href="<?php echo 'https://api.instagram.com/oauth/authorize/?client_id=' . $insta_client_id . '&redirect_uri=' . $redirect_uri . '&response_type=code&scope=basic' ?>" class="social-connect-button" id="inf_instagram"><img src="<?php echo content_url() . '/uploads/2018/11/Insta-icon-white.svg'; ?>"><span>CONNECT WITH INSTAGRAM</span></a>
</div>

<?php
return ob_get_clean();
}


/*
 * Influencer add to cart agreement form
 */
add_shortcode( 'inf-add-to-cart-agreement', 'inf_add_to_cart_agreement_shortcode' );
function inf_add_to_cart_agreement_shortcode() {
ob_start();
?>
</script>
<?php if( is_user_logged_in() ) : ?>
	<?php if( isset( $_GET['p'] ) && is_page( 'add-to-cart-agreement') ) : ?>
	<?php
		$user_id = get_current_user_id();

		// Campaign info
		$campaign_id = ltrim($_GET['p'], 'p');;
		$campaign = wc_get_product($campaign_id);
		$campaign_title = $campaign->get_data()['name'];
		$campaign_price=$campaign->get_price();
		$shoutout_channels = get_post_meta( $campaign_id, 'shoutout_channels', true );

		// Influencer info
		$user_info = get_userdata( $user_id );
		$first_name = $user_info->first_name;
		$last_name = $user_info->last_name;

		// Brand info
		$brand = get_campaign_brand($campaign_id);
        $brand_name = $brand->brand_name;
	?>
		<div class="add-to-cart-agreement-container">

			<p>Thank You For Wanting to Experience <?php echo esc_attr($campaign_title); ?></p>

			<p>Nicely done, <?php echo esc_attr( $first_name ) . ' ' . esc_attr( $last_name ); ?>, you qualify to participate in this ShoutOut!</p>

			<p>This is what is expected of your ShoutOuts for <?php echo esc_attr( $brand_name ); ?>.</p>

			<p><strong class="stg">Credit Card Hold:</strong>
			Please note we will be placing a <?php echo '$' . esc_attr( $campaign_price ); ?> hold on your credit card here, this is not a charge.
			The hold is released once your ShoutOut is successfully shared!</p>

			<?php echo do_shortcode('[shoutout-requirements campaign_id="'.$campaign_id.'"]') ?>

			<form id="add-to-cart-agreement-form" class="sas-form" method="post" action="<?php echo esc_url( admin_url('admin-post.php') ); ?>" >
				<div class="checkbox">
					<label>
						<input name="agreement" type="checkbox" required />
						<span>I accept, take me to checkout so we can get started!</span>
					</label>
				</div>
				<input type="hidden" name="action" value="add_to_cart_agreement" />
				<br>
				<button class="sas-form-submit" type="submit">Proceed</button>
			</form>
		</div>



	<?php endif; ?><!-- endif isset( $_GET['p'] ) && is_page( 'add-to-cart-agreement' ) -->

<?php endif; ?><!-- endif is_user_logged_in -->
<?php
return ob_get_clean();
}

// --------------------- //
// ---- BRAND FORMS ---- //
// --------------------- //

/**
 * Brand schedule demo contact form shortcode
 */
add_shortcode( 'brands-demo-form', 'brands_demo_form_shortcode' );
function brands_demo_form_shortcode() {
ob_start();
?>
<div class="brands-demo-form-container">
	<form class="sas-form" id="brands-demo-form" method="post">

        <h1>I would like to learn about...</h1>

        <div class="checkbox">
            <label>
            	<input type="checkbox" class="checkbox_info" value="The Marketplace">
            	<span>The Marketplace</span>
            </label>
        </div>

        <div class="checkbox">
            <label>
            	<input type="checkbox" class="checkbox_info" value="Social Listening">
            	<span>Social Listening</span>
            </label>
        </div>

        <div class="checkbox">
            <label>
            	<input type="checkbox" class="checkbox_info" value="Instagram Boosts">
            	<span>Instagram Boost</span>
            </label>
        </div>

        <div class="checkbox">
            <label>
            	<input type="checkbox" class="checkbox_info" value="Custom Giveaways">
            	<span>Custom Giveaways</span>
            </label>
        </div>

        <div class="checkbox">
            <label>
            	<input type="checkbox" class="checkbox_info" value="Case Studies">
            	<span>Case Studies</span>
            </label>
        </div>

        <div class="alert result-message"></div>

        <div class="form-group">
            <label for="contact-name">Name</label>
            <input type="text" id="contact-name" placeholder="Name" class="form-control" required />
        </div>

        <div class="form-group">
            <label for="company-name">Company Name</label>
            <input type="text" id="company-name" placeholder="Company Name" class="form-control" required />
        </div>

        <div class="form-group">
            <label for="contact-email">My Email</label>
            <input type="text" id="contact-email" placeholder="My Email" class="form-control" required />
        </div>

        <div class="form-group">
            <label for="contact-phone">Phone Number</label>
            <input type="text" name="contact_phone" id="contact-phone" placeholder="Phone Number" class="form-control" required />
        </div>

        <?php wp_nonce_field( 'brands_schedule_demo','brands_schedule_demo_nonce', true, true ); ?>

        <p>ShopandShout never shares your info with anyone</p>

        <button type="submit" class="sas-form-submit">Request Demo</button>

        <br>

        <p>A member of our team will be in<br>touch within two business days!</p>

    </form>
</div>

<?php
return ob_get_clean();
}

/**
 * Brands page simple contact form
 */
add_shortcode( 'brands-simple-demo-form', 'brands_simple_demo_form_shortcode' );
function brands_simple_demo_form_shortcode() {
ob_start();
?>
<div class="brands-simple-demo-form-container">

	<form class="sas-form" id="brands-simple-demo-form" method="post">

        <div class="alert result-message"></div>

        <div class="form-group simple-form-group">
        	<br>
            <input type="text" id="contact-email" placeholder="My Email" class="form-control" required />
        </div>

        <?php wp_nonce_field( 'brands_schedule_demo','brands_schedule_demo_nonce', true, true ); ?>

        <br>

        <button type="submit" class="sas-form-submit" style="margin: 0;">Request Demo</button>

    </form>
</div>

<?php
return ob_get_clean();
}

add_shortcode( 'brand-reject-influencer-form', 'brand_reject_influencer_form_shortcode' );
function brand_reject_influencer_form_shortcode() {

ob_start();

if( !isset($_GET['order']) ) {
	echo '<h1>Please select an order</h1>';
	echo '<a href="' . get_site_url() . '/brand-account/">Return to brand dashboard</a>';
} else {

$order_id = $_GET['order'];

if( $order_id != '' ) {
	$influencer_id = get_order_influencer( $order_id );
	$influencer_data = get_userdata($influencer_id);
	$influencer_name = $influencer_data->display_name;
}
?>
<div class="brand-reject-influencer-form-container">
	<a href="<?php echo get_site_url() . '/brand-account/'; ?>">Back to dashboard</a>
	<br><br>
	<form class="sas-form" id="brand-reject-influencer-form" method="post">

        <p>Hey sorry you're not interested in <?php echo esc_html($influencer_name); ?> participating in your ShoutOut.</p>

       	<p>Can you please identify why: (select all that apply)</p>

        <div class="alert result-message"></div>

        <div class="checkbox">
            <label>
            	<input type="checkbox" class="checkbox_info" value="Interests do not align with our brand">
            	<span><?php echo $influencer_name ?>'s interests do not align with our brand</span>
            </label>
        </div>

        <div class="checkbox">
            <label>
            	<input type="checkbox" class="checkbox_info" value="Engagement rate not high enough">
            	<span>Engagement rate not high enough</span>
            </label>
        </div>

        <div class="checkbox">
            <label>
            	<input type="checkbox" class="checkbox_info" value="Not in the geographic area we are looking to target.">
            	<span>Not in the geographic area we are looking to target</span>
            </label>
        </div>

        <div class="checkbox">
            <label>
            	<input type="checkbox" class="checkbox_info" value="other">
            	<span>Other</span>
            </label>
        </div>
        <div class="reason-other">
        	 <label style="color: red;">Please fill in politely, as this is communicated to the individual directly</label>
        	<textarea></textarea>
        </div>

        <input type="hidden" class="order" value="<?php echo esc_html($order_id); ?>">

        <?php wp_nonce_field( 'brand_reject_influencer','brand_reject_influencer_nonce', true, true ); ?>

        <button type="submit" class="sas-form-submit">Submit</button>
    </form>
    <div class="thank-you">
    	<h1>Thanks for your feedback!</h1>

    	<p>We're sorry <?php echo $influencer_name ?> didn't align - we do our best to ensure your criteria is met and use this submission as awesome feedback. This ShoutOut has now been cancelled on your behalf, and no further communication is required.</p>

    	<p>We have added 1 of your campaign items back into the inventory.</p>

    	<p>If you have additional feedback or requests, please email brands@shopandshout.com</p>

    	<a href="<?php echo get_site_url() . '/brand-account/'; ?>">Back to brand dashboard</a>
    </div>
</div>

<?php
}
return ob_get_clean();
}

add_shortcode( 'brand-shoutout-error-form', 'brand_shoutout_error_form_shortcode' );
function brand_shoutout_error_form_shortcode() {

$influencer_id = $_GET['influencer'];
$influencer_data = get_userdata($influencer_id);
$influencer_name = $influencer_data->display_name;

ob_start();

if( (!isset($_GET['influencer']) || !isset($_GET['campaign'])) && !is_admin() ) {
	wp_redirect(get_site_url());
}
?>
<div class="brand-shoutout-error-form-container">
	<form class="sas-form" id="brand-shoutout-error-form" method="post">

        <div class="alert result-message"></div>

        <div class="checkbox">
            <label>
            	<input type="checkbox" class="checkbox_info" value="other">
            	<span>Other</span>
            </label>
        </div>

        <button type="submit" class="sas-form-submit">Submit</button>
    </form>
</div>

<?php
return ob_get_clean();
}

add_shortcode( 'how-it-works-flip-cards', 'how_it_works_flip_cards_shortcode' );
function how_it_works_flip_cards_shortcode() {
ob_start();
?>
<div class="flip-cards-wrapper">
    <div class="flip-card">
        <div class="flip-card-inner">
            <div class="card-front">
                <div class="card-title">
                    <span class="title">ShoutOut Campaigns</span>
                    <span class="subtitle">Almost like online shopping, except everything is free</span>
                </div>
                <div class="card-icon">
                    <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/shoutout-icon.svg'; ?>">
                </div>
                <div class="more">
                    <span>Read More</span>
                    <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/flip-arrow.svg'; ?>">
                </div>
            </div>
            <a href="<?php echo get_site_url() . '/about-shoutouts'; ?>" class="card-back">
                <div class="card-top">
                    <span class="dot"></span>
                    <span class="line"></span>
                </div>
                <div class="card-info">
                    Save time and money, getting on-brand Influencer content shared to highly targeted communities. Give a product, get a ShoutOut!
                </div>
                <div class="less">
                    <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/flip-arrow.svg'; ?>">
                </div>
            </a>
        </div>
    </div>
    <div class="flip-card">
        <div class="flip-card-inner">
            <div class="card-front">
                <div class="card-title">
                    <span class="title">Giveaway Campaigns</span>
                    <span class="subtitle">A little giving goes a long way</span>
                </div>
                <div class="card-icon">
                    <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/giveaway-icon.svg'; ?>">
                </div>
                <div class="more">
                    <span>Read More</span>
                    <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/flip-arrow.svg'; ?>">
                </div>
            </div>
            <a href="<?php echo get_site_url() . '/about-giveaways'; ?>"  class="card-back">
                <div class="card-top">
                    <span class="dot"></span>
                    <span class="line"></span>
                </div>
                <div class="card-info">
                    Deploy a wave of Influencer giveaways designed to increase brand awareness, while growing your social following and engagement. Give a little, get a lot!
                </div>
                <div class="less">
                    <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/flip-arrow.svg'; ?>">
                </div>
            </a>
        </div>
    </div>
    <div class="flip-card">
        <div class="flip-card-inner">
            <div class="card-front">
                <div class="card-title">
                    <span class="title">Influencer Missions</span>
                    <span class="subtitle">Get deployed to active duty</span>
                </div>
                <div class="card-icon">
                    <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/mission-icon.svg'; ?>">
                </div>
                <div class="more">
                    <span>Read More</span>
                    <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/flip-arrow.svg'; ?>">
                </div>
            </div>
            <a href="<?php echo get_site_url() . '/about-missions'; ?>"  class="card-back">
                <div class="card-top">
                    <span class="dot"></span>
                    <span class="line"></span>
                </div>
                <div class="card-info">
                    An Influencer's relationship with their community can provide strategic value to your campaign goals. Whether it's market research driven, or you need something more custom - we can help.
                </div>
                <div class="less">
                    <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/flip-arrow.svg'; ?>">
                </div>
            </a>
        </div>
    </div><div class="flip-card">
        <div class="flip-card-inner">
            <div class="card-front">
                <div class="card-title">
                    <span class="title">Ambassador Programs</span>
                    <span class="subtitle">Take the relationship<br>to the next level</span>
                </div>
                <div class="card-icon">
                    <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/ambassador-icon.svg'; ?>">
                </div>
                <div class="more">
                    <span>Read More</span>
                    <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/flip-arrow.svg'; ?>">
                </div>
            </div>
            <a href="<?php echo get_site_url() . '/about-ambassadors'; ?>" class="card-back">
                <div class="card-top">
                    <span class="dot"></span>
                    <span class="line"></span>
                </div>
                <div class="card-info">
                    Build a commissioned tribe of advocates. From enrollment to deployment, and everything in-between - we have the experience and technology to track and manage the most demanding programs.
                </div>
                <div class="less">
                    <img src="<?php echo get_stylesheet_directory_uri() . '/images/pages/home/flip-arrow.svg'; ?>">
                </div>
            </a>
        </div>
    </div>
</div>
<?php
return ob_get_clean();
}// end how it works flip cards
?>
